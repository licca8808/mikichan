{% extends "layout.html" %} <!--layout.htmlã‚’ç¶™æ‰¿-->
{% block content %} 
<body>
    <div class="container">
        <!-- çµæœè¡¨ç¤ºã‚¨ãƒªã‚¢ -->
        <!-- Flaskã‹ã‚‰recommended_restaurantå¤‰æ•°ãŒã‚ã‚‹å ´åˆã«ã®ã¿è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ -->
        {% if recommended_restaurant %}
        <div id="results">
            <h2>âœ¨ ãŠã™ã™ã‚ã®ãŠåº— âœ¨</h2>
            <div id="recommendedRestaurant">
                <h3>{{ recommended_restaurant.name }}</h3>
                <img src="{{ recommended_restaurant.exterior_image_url }}" alt="{{ recommended_restaurant.name }} å¤–è¦³" class="w-full h-48 object-cover rounded-lg mb-4">
                <p><strong>é›°å›²æ°—:</strong> {{ recommended_restaurant.atmosphere_description }}</p>
                <p><strong>ãƒ¡ãƒ‹ãƒ¥ãƒ¼:</strong> {{ recommended_restaurant.menu_text }}</p>
                <img src="{{ recommended_restaurant.product_image_url }}" alt="{{ recommended_restaurant.name }} å•†å“ã‚¤ãƒ¡ãƒ¼ã‚¸" class="w-full h-32 object-cover rounded-lg mb-4">
                <p><strong>å¹³å‡ä¾¡æ ¼:</strong> Â¥{{ "{:,.0f}".format(recommended_restaurant.average_price) }}</p>
                <p><strong>ä½æ‰€:</strong> {{ recommended_restaurant.address }}</p>
                <p><strong>å®¢å±¤ã‚¹ã‚³ã‚¢:</strong> {{ recommended_restaurant.customer_demographics_score }} / 10</p>
                <p><strong>ãƒãƒƒãƒåº¦:</strong> {{ "{:.2f}".format(recommended_restaurant.similarity_score * 100) }}%</p>
                
                <!-- æ„Ÿæƒ…åˆ†æã®çµæœã‚’è¡¨ç¤ºã™ã‚‹éƒ¨åˆ†ã‚’è¿½åŠ  -->
                {% if user_sentiment %}
                <div>
                    <strong>ã‚ãªãŸã®å…¥åŠ›ã®æ„Ÿæƒ…:</strong> {{ user_sentiment.label }} (ã‚¹ã‚³ã‚¢: {{ "{:.2f}".format(user_sentiment.score) }})
                    {% if user_sentiment.label == 'POSITIVE' %}
                        ğŸ˜Š è‰¯ã„é›°å›²æ°—ã§ã™ã­ï¼
                    {% elif user_sentiment.label == 'NEGATIVE' %}
                        ğŸ™ ãƒã‚¬ãƒ†ã‚£ãƒ–ãªè¨€è‘‰ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã­ã€‚ã‚ˆã‚Šæ…é‡ã«æ¢ã—ã¾ã™ã€‚
                    {% else %}
                        ğŸ¤” æ„Ÿæƒ…ã‚’åˆ¤æ–­ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚
                    {% endif %}
                </div>
                {% endif %}

            </div>

            <h3>ãã®ä»–ã®ä¸Šä½å€™è£œ</h3>
            <div id="topRestaurantsList">
                <!-- top_restaurantsãƒªã‚¹ãƒˆã‚’ãƒ«ãƒ¼ãƒ—ã—ã¦å„ãŠåº—ã®æƒ…å ±ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚ -->
                {% for resto in top_restaurants %}
                <div>
                    <h4>{{ resto.name }}</h4>
                    <img src="{{ resto.exterior_image_url }}" alt="{{ resto.name }} å¤–è¦³" class="w-full h-24 object-cover rounded-lg mb-2">
                    <p>{{ resto.atmosphere_description }}</p>
                    <p><strong>ãƒãƒƒãƒåº¦:</strong> {{ "{:.2f}".format(resto.similarity_score * 100) }}%</p>
                </div>
                {% endfor %}
            </div>
            <div>
                <a href="{{ url_for('search_form') }}" >
                    ã‚‚ã†ä¸€åº¦æ¤œç´¢ã™ã‚‹ â†©ï¸
                </a>
            </div>
        </div>
        {% else %}
        <!-- ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºã‚¨ãƒªã‚¢ -->
        <!-- Flaskã‹ã‚‰æ¸¡ã•ã‚ŒãŸerror_messageå¤‰æ•°ãŒã‚ã‚‹å ´åˆã«ã®ã¿è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ -->
        <div id="errorMessage" class="error" role="alert">
            <strong>ã‚¨ãƒ©ãƒ¼:</strong>
            <span id="errorText">{{ error_message }}</span>
        </div>
        <div>
            <a href="{{ url_for('search_form') }}" >
                æ¤œç´¢ãƒšãƒ¼ã‚¸ã«æˆ»ã‚‹ â†©ï¸
            </a>
        </div>
        {% endif %}
    </div>
</body>
{% endblock %} 